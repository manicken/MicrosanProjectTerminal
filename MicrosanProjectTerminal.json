{
  "meta": {
  "projectName":"Lumatron AMP",
  "created":"2025-10-11 14:14:42",
  "modified":"2025-11-27 11:42:53",
  "version":1
  },
  "sendGroups": [
    {"name":"Volumes","note":"","items":[
      {"data": "VM30", "note": "master volume 30"},
      {"data": "VM40", "note": "master volume 40"},
      {"data": "VM50", "note": "master volume 50"},
      {"data": "VM60", "note": "master volume 60"},
      {"data": "VM79", "note": "front volume max"},
      {"IsDelimiter":true},
      {"data": "VF00", "note": "front volume min"},
      {"data": "VF15", "note": "front volume max"},
      {"IsDelimiter":true},
      {"data": "VC00", "note": "centre volume min"},
      {"data": "VC15", "note": "centre volume max"},
      {"IsDelimiter":true},
      {"data": "VW00", "note": "woofer volume min"},
      {"data": "VW15", "note": "woofer volume max"},
      {"IsDelimiter":true},
      {"data": "VR00", "note": "rear vol min"},
      {"data": "VR15", "note": "rear vol max"}  
    ]},
    {"name":"InputStage","note":"","items":[
      {"data": "IG0", "note": "in6ch to out6ch"},
      {"data": "IG1", "note": "AUX2"},
      {"data": "IG2", "note": "AUX1"},
      {"data": "IG3", "note": "RADIO"},
      {"data": "IG4", "note": "in2ch to out6ch"},
      {"IsDelimiter":true},
      {"data": "IM3F", "note": "in stage ch mute"},
      {"data": "IS0", "note": "enhanced surr. off"},
      {"data": "IS1", "note": "enhanced surr. on"},
      {"IsDelimiter":true},
      {"data": "II", "note": "input stage init."},
      {"data": "I?", "note": ""},
      {"IsDelimiter":true},
      {"data": "IMF*1", "note": "front mute"},
      {"data": "IMF*0", "note": "front unmute"},
      {"data": "IMR*1", "note": "rear mute"},
      {"data": "IMR*0", "note": "rear unmute"},
      {"data": "IMC1", "note": "centre mute"},
      {"data": "IMC0", "note": "centre unmute"},
      {"data": "IMW1", "note": "woofer mute"},
      {"data": "IMW0", "note": "woofer unmute"},
      {"data": "IMFL1", "note": "front left mute"},
      {"data": "IMFL0", "note": "front left unmute"},
      {"data": "IMFR1", "note": "front right mute"},
      {"data": "IMFR0", "note": "front right unmute"},
      {"data": "IMRL1", "note": "rear left mute"},
      {"data": "IMRL0", "note": "rear left unmute"},
      {"data": "IMRR1", "note": "rear right mute"},
      {"data": "IMRR0", "note": "rear right unmute"},
      {"data": "IX1", "note": "enable centre/sub +6dB"},
      {"data": "IX0", "note": "disable centre/sub +6dB"},
      {"data": "IMF*T", "note": "front toggle mute"},
      {"data": "IMR*T", "note": "rear toggle mute"},
      {"data": "IMFLT", "note": "front left toggle mute"},
      {"data": "IMFRT", "note": "front right toggle mute"},
      {"data": "IMRLT", "note": "rear left toggle mute"},
      {"data": "IMRRT", "note": "rear right toggle mute"},
      {"data": "IMCT", "note": "centre toggle mute"},
      {"data": "IMWT", "note": "woofer toggle mute"}  
    ]},
    {"name":"Part3","note":"","items":[
      {"data": "IG0", "note": "in6ch to out6ch"},
      {"data": "IG1", "note": "AUX2"},
      {"data": "IG2", "note": "AUX1"},
      {"data": "IG3", "note": "RADIO"},
      {"data": "IG4", "note": "in2ch to out6ch"},
      {"data": "PA0", "note": "amp stage off"},
      {"data": "PA1", "note": "amp stage on"},
      {"data": "IM3F", "note": "in stage ch mute"},
      {"data": "VM50", "note": ""},
      {"data": "VM60", "note": "master volume (0-79)"},
      {"data": "VM79", "note": "front volume (0-15)"},
      {"data": "VF00", "note": "rear volume (0-15)"},
      {"data": "VF15", "note": "centre volume (0-15)"},
      {"data": "VW15", "note": "woofer volume (0-15)"},
      {"data": "TA0", "note": "tone ctrl. off"},
      {"data": "TA1", "note": "tone ctrl. on"},
      {"data": "OM0", "note": "output stage unmute"},
      {"data": "OM1", "note": "output stage mute"},
      {"data": "TT15", "note": "tone ctrl, treble (0-15)"},
      {"data": "TM15", "note": "tone ctrl, middle (0-15)"},
      {"data": "TB15", "note": "tone ctrl, bass (0-15)"},
      {"data": "IS0", "note": "enhanced surr. off"},
      {"data": "IS1", "note": "enhanced surr. on"},
      {"data": "O30", "note": "3d effect off"},
      {"data": "O31", "note": "3d effect on"},
      {"data": "II", "note": "input stage init."},
      {"data": "OI", "note": "output stage init."},
      {"data": "CG", "note": "get configuration and settings"},
      {"data": "CL", "note": "load from EEPROM"},
      {"data": "CS", "note": "save to EEPROM"},
      {"data": "CA", "note": "apply settings"},
      {"data": "?", "note": ""},
      {"data": "V?", "note": ""},
      {"data": "I?", "note": ""},
      {"data": "P?", "note": ""},
      {"data": "O?", "note": ""},
      {"data": "T?", "note": ""},
      {"data": "C?", "note": ""},
      {"data": "IMF*1", "note": "front mute"},
      {"data": "IMF*0", "note": "front unmute"},
      {"data": "IMR*1", "note": "rear mute"},
      {"data": "IMR*0", "note": "rear unmute"},
      {"data": "IMC1", "note": "centre mute"},
      {"data": "IMC0", "note": "centre unmute"},
      {"data": "IMW1", "note": "woofer mute"},
      {"data": "IMW0", "note": "woofer unmute"},
      {"data": "IMFL1", "note": "front left mute"},
      {"data": "IMFL0", "note": "front left unmute"},
      {"data": "IMFR1", "note": "front right mute"},
      {"data": "IMFR0", "note": "front right unmute"},
      {"data": "IMRL1", "note": "rear left mute"},
      {"data": "IMRL0", "note": "rear left unmute"},
      {"data": "IMRR1", "note": "rear right mute"},
      {"data": "IMRR0", "note": "rear right unmute"},
      {"data": "IX1", "note": "enable centre/sub +6dB"},
      {"data": "IX0", "note": "disable centre/sub +6dB"},
      {"data": "IMF*T", "note": "front toggle mute"},
      {"data": "IMR*T", "note": "rear toggle mute"},
      {"data": "IMFLT", "note": "front left toggle mute"},
      {"data": "IMFRT", "note": "front right toggle mute"},
      {"data": "IMRLT", "note": "rear left toggle mute"},
      {"data": "IMRRT", "note": "rear right toggle mute"},
      {"data": "IMCT", "note": "centre toggle mute"},
      {"data": "IMWT", "note": "woofer toggle mute"}  
    ]},
    {"name":"Part2","note":"","items":[
      {"data": "IG0", "note": "in6ch to out6ch"},
      {"data": "IG1", "note": "AUX2"},
      {"data": "IG2", "note": "AUX1"},
      {"data": "IG3", "note": "RADIO"},
      {"data": "IG4", "note": "in2ch to out6ch"},
      {"data": "PA0", "note": "amp stage off"},
      {"data": "PA1", "note": "amp stage on"},
      {"data": "IM3F", "note": "in stage ch mute"},
      {"data": "VM40", "note": "master volume 40"},
      {"data": "VM50", "note": "master volume 50"},
      {"data": "VM60", "note": "master volume 60"},
      {"data": "VM70", "note": "master volume 70"},
      {"data": "VM79", "note": "master volume max"},
      {"data": "VF00", "note": "rear volume (0-15)"},
      {"data": "VF15", "note": "centre volume (0-15)"},
      {"data": "VW15", "note": "woofer volume (0-15)"},
      {"data": "TA0", "note": "tone ctrl. off"},
      {"data": "TA1", "note": "tone ctrl. on"},
      {"data": "OM0", "note": "output stage unmute"},
      {"data": "OM1", "note": "output stage mute"},
      {"data": "TT15", "note": "tone ctrl, treble (0-15)"},
      {"data": "TM15", "note": "tone ctrl, middle (0-15)"},
      {"data": "TB15", "note": "tone ctrl, bass (0-15)"},
      {"data": "IS0", "note": "enhanced surr. off"},
      {"data": "IS1", "note": "enhanced surr. on"},
      {"data": "O30", "note": "3d effect off"},
      {"data": "O31", "note": "3d effect on"},
      {"data": "II", "note": "input stage init."},
      {"data": "OI", "note": "output stage init."},
      {"data": "CG", "note": "get configuration and settings"},
      {"data": "CL", "note": "load from EEPROM"},
      {"data": "CS", "note": "save to EEPROM"},
      {"data": "CA", "note": "apply settings"},
      {"data": "?", "note": ""},
      {"data": "V?", "note": ""},
      {"data": "I?", "note": ""},
      {"data": "P?", "note": ""},
      {"data": "O?", "note": ""},
      {"data": "T?", "note": ""},
      {"data": "C?", "note": ""},
      {"data": "IMF*1", "note": "front mute"},
      {"data": "IMF*0", "note": "front unmute"},
      {"data": "IMR*1", "note": "rear mute"},
      {"data": "IMR*0", "note": "rear unmute"},
      {"data": "IMC1", "note": "centre mute"},
      {"data": "IMC0", "note": "centre unmute"},
      {"data": "IMW1", "note": "woofer mute"},
      {"data": "IMW0", "note": "woofer unmute"},
      {"data": "IMFL1", "note": "front left mute"},
      {"data": "IMFL0", "note": "front left unmute"},
      {"data": "IMFR1", "note": "front right mute"},
      {"data": "IMFR0", "note": "front right unmute"},
      {"data": "IMRL1", "note": "rear left mute"},
      {"data": "IMRL0", "note": "rear left unmute"},
      {"data": "IMRR1", "note": "rear right mute"},
      {"data": "IMRR0", "note": "rear right unmute"},
      {"data": "IX1", "note": "enable centre/sub +6dB"},
      {"data": "IX0", "note": "disable centre/sub +6dB"},
      {"data": "IMF*T", "note": "front toggle mute"},
      {"data": "IMR*T", "note": "rear toggle mute"},
      {"data": "IMFLT", "note": "front left toggle mute"},
      {"data": "IMFRT", "note": "front right toggle mute"},
      {"data": "IMRLT", "note": "rear left toggle mute"},
      {"data": "IMRRT", "note": "rear right toggle mute"},
      {"data": "IMCT", "note": "centre toggle mute"},
      {"data": "IMWT", "note": "woofer toggle mute"},
      {"data": "", "note": ""},
      {"data": "", "note": ""}  
    ]},
    {"name":"dalhal2","note":"","items":[
      {"data": "read/string/i2c/list", "note": "test"},
      {"data": "{ \r\n  \"name\": \"Room Temperature\",\r\n  \"state_topic\":\"dalhalla/sensor/temp_room\",\r\n  \"unit_of_measurement\": \"°C\",\r\n  \"device_class\": \"temperature\",\r\n  \"unique_id\": \"dalhalla_temp_room\",\r\n  \"availability_topic\": \"dalhalla/status\",\r\n  \"payload_available\": \"online\",\r\n  \"payload_not_available\": \"offline\"\r\n}", "note": "{"}  
    ]},
    {"name":"Part22","note":"","items":[
  
    ]}
  ],
  "connections":{
    "activeType": "MQTT",
    "items": [
      {
        "$type": "Microsan.TCPClientSettings, MicrosanProjectTerminal",
        "Host": "192.168.50.200",
        "Port": 82,
        "Type": "TCP",
        "msgPrefix": ":",
        "msgPostfix": "\\n"
      },
      {
        "$type": "Microsan.SerialSettings, MicrosanProjectTerminal",
        "PortName": "COM4",
        "BaudRate": 115200,
        "Type": "Serial",
        "msgPrefix": "",
        "msgPostfix": "\\n"
      },
      {
        "$type": "Microsan.WebsocketClientSettings, MicrosanProjectTerminal",
        "Uri": "127.0.0.1:3000",
        "UseSecure": false,
        "Type": "Websocket",
        "msgPrefix": "",
        "msgPostfix": "\\r\\n"
      },
      {
        "$type": "Microsan.HttpRestSettings, MicrosanProjectTerminal",
        "Uri": "192.168.50.29:82",
        "UseSecure": false,
        "Type": "HttpRest",
        "msgPrefix": "",
        "msgPostfix": ""
      },
      {
        "$type": "Microsan.MqttClientSettings, MicrosanProjectTerminal",
        "Host": "localhost",
        "Port": 1883,
        "ClientId": "Client2",
        "Username": "",
        "Password": "",
        "Topic": "test/topic",
        "UseTLS": false,
        "WithRetainFlag": false,
        "WithCleanSessionFlag": true,
        "Type": "MQTT",
        "msgPrefix": "",
        "msgPostfix": "\\r\\n"
      }
    ]
  },
  "sourceFiles": [
    {
      "fileName": "RootClass.cs",
      "contents": "using System;\r\nusing System.Text;\r\nusing System.Windows.Forms;\r\nusing Microsan;\r\n\r\nusing System.Net;\r\nusing System.Net.Sockets;\r\n\r\nusing System.Threading;\r\n\r\n//using OxyPlot;\r\n//using OxyPlot.Series;\r\n//using OxyPlot.WindowsForms;\r\n//using System.Collections.Generic;\r\n//using System.Drawing;\r\n//using System.IO.Ports;\r\n\r\nnamespace RuntimeProgrammingNamespace\r\n{ \r\n    public class RootClass\r\n    {\r\n        private static MainForm mForm = null;\r\n        public static RichTextBox rtxt = null;\r\n       \r\n        /// <summary> The main entry point for the runtime compile code. </summary>\r\n\r\n        public static void Main(object rootObject)\r\n        {\r\n            mForm                  = rootObject as MainForm;\r\n            rtxt                   = mForm.rtxtCtrl.rtxt;\r\n            SimpleTcpServer tcpSrv = new SimpleTcpServer(82);\r\n            \r\n            tcpSrv.Start();\r\n            \r\n        }\r\n        \r\n        [Shortcut(\"Start Test1\",\"start\")]\r\n        public static void Test1()\r\n        {\r\n            MessageBox.Show(\"Test1\");\r\n        }\r\n        [Shortcut(\"Start Test2\",\"start2\")]\r\n        public static void Test2()\r\n        {\r\n            MessageBox.Show(\"Test2\");\r\n        }\r\n        [Shortcut(\"Start Test3\",\"stop\")]\r\n        public static void Test3()\r\n        {\r\n            MessageBox.Show(\"Test3\");\r\n        }\r\n    }\r\n    public class SimpleTcpServer\r\n{\r\n    private TcpListener listener;\r\n    private bool running;\r\n\r\n    public int Port { get; set; }\r\n\r\n    public SimpleTcpServer(int port)\r\n    {\r\n        Port = port;\r\n        listener = new TcpListener(IPAddress.Any, Port);\r\n    }\r\n\r\n    public void Start()\r\n    {\r\n        listener.Start();\r\n        running = true;\r\n        RuntimeProgrammingNamespace.RootClass.rtxt.AppendText(\"Server started on port \" + Port);\r\n        Console.WriteLine(\"Server started on port \" + Port);\r\n\r\n        Thread listenerThread = new Thread(ListenLoop);\r\n        listenerThread.IsBackground = true;\r\n        listenerThread.Start();\r\n    }\r\n\r\n    public void Stop()\r\n    {\r\n        running = false;\r\n        listener.Stop();\r\n        Console.WriteLine(\"Server stopped\");\r\n    }\r\n\r\n    private void ListenLoop()\r\n    {\r\n        while (running)\r\n        {\r\n            try\r\n            {\r\n                TcpClient client = listener.AcceptTcpClient();\r\n                Console.WriteLine(\"Client connected\");\r\n\r\n                Thread clientThread = new Thread(() => HandleClient(client));\r\n                clientThread.IsBackground = true;\r\n                clientThread.Start();\r\n            }\r\n            catch (SocketException)\r\n            {\r\n                // Listener stopped\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    private void HandleClient(TcpClient client)\r\n    {\r\n        using (client)\r\n        {\r\n            NetworkStream stream = client.GetStream();\r\n            byte[] buffer = new byte[1024];\r\n\r\n            int bytesRead;\r\n            while ((bytesRead = stream.Read(buffer, 0, buffer.Length)) != 0)\r\n            {\r\n                string received = Encoding.UTF8.GetString(buffer, 0, bytesRead);\r\n                Console.WriteLine(\"Received: \" + received);\r\n\r\n                byte[] response = Encoding.UTF8.GetBytes(\"Echo: \" + received);\r\n                stream.Write(response, 0, response.Length);\r\n            }\r\n\r\n            Console.WriteLine(\"Client disconnected\");\r\n        }\r\n    }\r\n}\r\n}",
      "editorSelectionStart": 1746,
      "editorSelectionLength": 1,
      "editorVerticalScrollValue": 739,
      "editorHorizontalScrollValue": 0
    },
    {
      "fileName": "NewClass.cs",
      "contents": "using System;\r\nusing System.Net;\r\nusing System.Net.Sockets;\r\nusing System.Text;\r\nusing System.Threading.Tasks;\r\nusing System.Windows.Forms;\r\nusing Microsan;\r\n\r\n\r\n",
      "editorSelectionStart": 160,
      "editorSelectionLength": 0,
      "editorVerticalScrollValue": 0,
      "editorHorizontalScrollValue": 0
    }
  ],
  "window": {
    "main": {"x":540,"y":157,"width":989,"height":740},
    "codeEdit": {"x":894,"y":135,"width":830,"height":740},
    "jsonEdit": {"x":1042,"y":36,"width":577,"height":740},
  },
  "dockData":"﻿<?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<!--DockPanel configuration file. Author: Weifen Luo, all rights reserved.-->\r\n<!--!!! AUTOMATICALLY GENERATED FILE. DO NOT MODIFY !!!-->\r\n<DockPanel FormatVersion=\"1.0\" DockLeftPortion=\"350\" DockRightPortion=\"0.25\" DockTopPortion=\"0.25\" DockBottomPortion=\"0.25\" ActiveDocumentPane=\"2\" ActivePane=\"2\">\r\n  <Contents Count=\"8\">\r\n    <Content ID=\"0\" PersistString=\"Microsan.ConnectionSettingsControlDockContent\" AutoHidePortion=\"0.25\" IsHidden=\"False\" IsFloat=\"False\" />\r\n    <Content ID=\"1\" PersistString=\"Microsan.RichTextBoxControlDockContent\" AutoHidePortion=\"0.25\" IsHidden=\"False\" IsFloat=\"False\" />\r\n    <Content ID=\"2\" PersistString=\"Microsan.DataGridViewSendControlDockContent:Volumes\" AutoHidePortion=\"0.25\" IsHidden=\"False\" IsFloat=\"False\" />\r\n    <Content ID=\"3\" PersistString=\"Microsan.DataGridViewSendControlDockContent:InputStage\" AutoHidePortion=\"0.25\" IsHidden=\"False\" IsFloat=\"False\" />\r\n    <Content ID=\"4\" PersistString=\"Microsan.DataGridViewSendControlDockContent:Part3\" AutoHidePortion=\"0.25\" IsHidden=\"False\" IsFloat=\"False\" />\r\n    <Content ID=\"5\" PersistString=\"Microsan.DataGridViewSendControlDockContent:Part2\" AutoHidePortion=\"0.25\" IsHidden=\"False\" IsFloat=\"False\" />\r\n    <Content ID=\"6\" PersistString=\"Microsan.DataGridViewSendControlDockContent:dalhal2\" AutoHidePortion=\"0.25\" IsHidden=\"False\" IsFloat=\"False\" />\r\n    <Content ID=\"7\" PersistString=\"Microsan.DataGridViewSendControlDockContent:Part22\" AutoHidePortion=\"0.25\" IsHidden=\"False\" IsFloat=\"False\" />\r\n  </Contents>\r\n  <Panes Count=\"4\">\r\n    <Pane ID=\"0\" DockState=\"DockLeft\" ActiveContent=\"0\">\r\n      <Contents Count=\"1\">\r\n        <Content ID=\"0\" RefID=\"0\" />\r\n      </Contents>\r\n    </Pane>\r\n    <Pane ID=\"1\" DockState=\"DockLeft\" ActiveContent=\"1\">\r\n      <Contents Count=\"1\">\r\n        <Content ID=\"0\" RefID=\"1\" />\r\n      </Contents>\r\n    </Pane>\r\n    <Pane ID=\"2\" DockState=\"Document\" ActiveContent=\"6\">\r\n      <Contents Count=\"6\">\r\n        <Content ID=\"0\" RefID=\"6\" />\r\n        <Content ID=\"1\" RefID=\"2\" />\r\n        <Content ID=\"2\" RefID=\"3\" />\r\n        <Content ID=\"3\" RefID=\"4\" />\r\n        <Content ID=\"4\" RefID=\"5\" />\r\n        <Content ID=\"5\" RefID=\"7\" />\r\n      </Contents>\r\n    </Pane>\r\n    <Pane ID=\"3\" DockState=\"Float\" ActiveContent=\"-1\">\r\n      <Contents Count=\"1\">\r\n        <Content ID=\"0\" RefID=\"7\" />\r\n      </Contents>\r\n    </Pane>\r\n  </Panes>\r\n  <DockWindows>\r\n    <DockWindow ID=\"0\" DockState=\"Document\" ZOrderIndex=\"0\">\r\n      <NestedPanes Count=\"1\">\r\n        <Pane ID=\"0\" RefID=\"2\" PrevPane=\"-1\" Alignment=\"Right\" Proportion=\"0.5\" />\r\n      </NestedPanes>\r\n    </DockWindow>\r\n    <DockWindow ID=\"1\" DockState=\"DockLeft\" ZOrderIndex=\"1\">\r\n      <NestedPanes Count=\"2\">\r\n        <Pane ID=\"0\" RefID=\"0\" PrevPane=\"-1\" Alignment=\"Bottom\" Proportion=\"0.5\" />\r\n        <Pane ID=\"1\" RefID=\"1\" PrevPane=\"0\" Alignment=\"Bottom\" Proportion=\"0.286039453717754\" />\r\n      </NestedPanes>\r\n    </DockWindow>\r\n    <DockWindow ID=\"2\" DockState=\"DockRight\" ZOrderIndex=\"2\">\r\n      <NestedPanes Count=\"0\" />\r\n    </DockWindow>\r\n    <DockWindow ID=\"3\" DockState=\"DockTop\" ZOrderIndex=\"3\">\r\n      <NestedPanes Count=\"0\" />\r\n    </DockWindow>\r\n    <DockWindow ID=\"4\" DockState=\"DockBottom\" ZOrderIndex=\"4\">\r\n      <NestedPanes Count=\"0\" />\r\n    </DockWindow>\r\n  </DockWindows>\r\n  <FloatWindows Count=\"1\">\r\n    <FloatWindow ID=\"0\" Bounds=\"522, 227, 300, 300\" ZOrderIndex=\"0\">\r\n      <NestedPanes Count=\"1\">\r\n        <Pane ID=\"0\" RefID=\"3\" PrevPane=\"-1\" Alignment=\"Right\" Proportion=\"0.5\" />\r\n      </NestedPanes>\r\n    </FloatWindow>\r\n  </FloatWindows>\r\n</DockPanel>"
}
